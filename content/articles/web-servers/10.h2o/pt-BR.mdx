---
title: H2O - O Servidor Web Otimizado para HTTP/2
description: Explore o H2O, o servidor HTTP de nova geração otimizado para HTTP/2. Aprenda sobre sua performance superior, recursos modernos e suporte a protocolos de ponta.
publishedAt: 2024-11-08
author: Eduardo Schelive
tags: [h2o, servidor-web, http2, performance, moderno]
slug: h2o
coverImage: https://h2o.examp1e.net/assets/logo.svg
---

# H2O - O Servidor Web Otimizado para HTTP/2

H2O é um servidor HTTP de nova geração que fornece tempos de resposta mais rápidos e menor latência. Construído desde o início com HTTP/2 em mente, oferece performance de ponta e suporte a protocolos modernos.

## O que é H2O?

H2O é um servidor HTTP otimizado com suporte para HTTP/1.x, HTTP/2 e HTTP/3. Desenvolvido por Kazuho Oku e DeNA Co., Ltd., é projetado para fornecer a melhor performance possível para aplicações web modernas. O nome "H2O" representa o protocolo HTTP/2 de forma simples e memorável.

## Recursos Principais

- **Otimizado para HTTP/2**: Construído especificamente para HTTP/2 desde o início
- **Suporte HTTP/3/QUIC**: Suporte experimental para os protocolos mais recentes
- **Server Push**: Capacidades automáticas de server push HTTP/2
- **Rápido**: Implementação otimizada em C para velocidade máxima
- **Aceleração TLS**: Aceleração por hardware para SSL/TLS
- **Integração Mruby**: Programável com scripts mruby
- **Log de Acesso**: Sistema de logging flexível e eficiente

## Instalação

Instalando H2O no Linux:

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install h2o

# Do código fonte
git clone https://github.com/h2o/h2o.git
cd h2o
cmake -DWITH_MRUBY=on .
make
sudo make install
```

## Configuração Básica

H2O usa YAML para configuração (`/etc/h2o/h2o.conf`):

```yaml
hosts:
  "exemplo.com:80":
    paths:
      /:
        file.dir: /var/www/html
    access-log: /var/log/h2o/access.log
```

## Configuração HTTP/2

Habilite HTTP/2 com HTTPS:

```yaml
hosts:
  "exemplo.com:443":
    listen:
      port: 443
      ssl:
        certificate-file: /path/to/cert.pem
        key-file: /path/to/key.pem
    paths:
      /:
        file.dir: /var/www/html
    
    # HTTP/2 é automaticamente habilitado com SSL
```

## Server Push

Configure HTTP/2 server push:

```yaml
hosts:
  "exemplo.com:443":
    paths:
      /:
        file.dir: /var/www/html
        header.add: "Link: </style.css>; rel=preload; as=style"
        header.add: "Link: </script.js>; rel=preload; as=script"
```

## Proxy Reverso

Use H2O como proxy reverso:

```yaml
hosts:
  "exemplo.com:80":
    paths:
      /:
        proxy.reverse.url: http://localhost:8080
        proxy.preserve-host: ON
        proxy.timeout.io: 60000
```

## Handler Mruby

Estenda H2O com scripts mruby:

```yaml
hosts:
  "exemplo.com:80":
    paths:
      /api:
        mruby.handler: |
          Proc.new do |env|
            [200, {"content-type" => "application/json"}, ['{"status":"ok"}']]
          end
```

## Ajuste de Performance

Otimize H2O para alta performance:

```yaml
# Configurações globais
num-threads: 4
max-connections: 10000
http2-max-concurrent-requests-per-connection: 100

# Configurações por host
hosts:
  "exemplo.com:443":
    listen:
      port: 443
      ssl:
        cipher-suite: "ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384"
        cipher-preference: server
```

## Controle de Acesso

Implemente controle de acesso:

```yaml
hosts:
  "exemplo.com:80":
    paths:
      /admin:
        file.dir: /var/www/admin
        mruby.handler: |
          Proc.new do |env|
            if env["REMOTE_ADDR"] != "192.168.1.100"
              [403, {}, ["Forbidden"]]
            else
              nil  # Continua para próximo handler
            end
          end
```

## Suporte WebSocket

H2O suporta conexões WebSocket:

```yaml
hosts:
  "exemplo.com:80":
    paths:
      /ws:
        proxy.reverse.url: http://localhost:8080
        proxy.websocket: ON
```

## Benchmarks de Performance

H2O consistentemente mostra excelente performance:

- Eficiência superior de multiplexação HTTP/2
- Menor latência que Nginx e Apache
- Melhor utilização de recursos
- Handshakes TLS mais rápidos com aceleração por hardware

## Conclusão

H2O representa a próxima geração de servidores web, construído para protocolos modernos como HTTP/2 e HTTP/3. Suas características de performance e conjunto de recursos modernos o tornam uma excelente escolha para aplicações web de alta performance.
