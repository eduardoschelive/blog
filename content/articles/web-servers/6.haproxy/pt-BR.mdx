---
title: HAProxy - O Balanceador de Carga Confiável de Alta Disponibilidade
description: Domine o HAProxy, o balanceador de carga de software mais rápido e usado do mundo. Aprenda sobre balanceamento TCP/HTTP, verificações de saúde e configurações de alta disponibilidade.
publishedAt: 2024-08-12
author: Eduardo Schelive
tags: [haproxy, balanceador-carga, alta-disponibilidade, tcp, performance]
slug: haproxy
coverImage: https://www.haproxy.org/img/HAProxyCommunityEdition_60px.png
---

# HAProxy - O Balanceador de Carga Confiável de Alta Disponibilidade

HAProxy (High Availability Proxy) é uma solução gratuita, rápida e confiável que oferece balanceamento de carga e proxy para aplicações baseadas em TCP e HTTP. É o padrão de fato para balanceamento de carga de software.

## O que é HAProxy?

HAProxy é um software de código aberto que fornece um balanceador de carga de alta disponibilidade e servidor proxy para aplicações baseadas em TCP e HTTP. Criado por Willy Tarreau em 2000, alimenta muitos dos sites mais visitados do mundo, incluindo GitHub, Reddit e Stack Overflow.

## Recursos Principais

- **Alta Performance**: Gerencia milhões de requisições por segundo
- **Camada 4 e Camada 7**: Balanceamento de carga TCP e HTTP
- **Verificações de Saúde**: Monitoramento de saúde ativo e passivo
- **Terminação SSL/TLS**: Descarrega processamento SSL dos backends
- **Stick Tables**: Persistência de sessão e limitação de taxa
- **ACLs**: Listas de controle de acesso poderosas para decisões de roteamento
- **Dashboard de Estatísticas**: Monitoramento e estatísticas em tempo real

## Instalação

Instalando HAProxy no Linux:

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install haproxy

# CentOS/RHEL
sudo yum install haproxy

# Iniciar o serviço
sudo systemctl start haproxy
sudo systemctl enable haproxy
```

## Configuração Básica

A configuração do HAProxy está em `/etc/haproxy/haproxy.cfg`:

```haproxy
global
    maxconn 4096
    log /dev/log local0

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend http_front
    bind *:80
    default_backend http_back

backend http_back
    balance roundrobin
    server server1 192.168.1.10:80 check
    server server2 192.168.1.11:80 check
    server server3 192.168.1.12:80 check
```

## Algoritmos de Balanceamento

HAProxy suporta múltiplos algoritmos de balanceamento:

- **roundrobin**: Cada servidor por vez
- **leastconn**: Servidor com menos conexões
- **source**: Baseado em hash do IP do cliente
- **uri**: Baseado em hash da URI
- **random**: Seleção aleatória de servidor

## Verificações de Saúde

Configure verificações de saúde para garantir que o tráfego vá apenas para servidores saudáveis:

```haproxy
backend http_back
    option httpchk GET /health
    http-check expect status 200
    server server1 192.168.1.10:80 check inter 2000 rise 2 fall 3
```

## Configuração SSL/TLS

Habilite HTTPS com terminação SSL:

```haproxy
frontend https_front
    bind *:443 ssl crt /etc/haproxy/certs/exemplo.pem
    default_backend http_back
```

## Dashboard de Estatísticas

Habilite a página de estatísticas:

```haproxy
listen stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE
```

## Conclusão

HAProxy é o padrão ouro para balanceamento de carga. Sua confiabilidade, performance e conjunto extenso de recursos o tornam a escolha principal para implantações de alta disponibilidade.
